# Medarot-P
- Medarot-Pは、ゲームシリーズ「メダロット」のバトルシステム(ロボトル)をPythonでのバイブコーディングで再現する試みです。
- ライブラリとしてPygameを利用しています。

# 開発方針
- ECSアーキテクチャ(Entity Component System)を順守すること。
- ドメイン（ゲームコア）と実装（ゲーム進行）、UI（画面描画）を明確に分離すること。
- パフォーマンス向上のために行数が増えるような最適化は避け、コードをシンプルかつ明快に保つこと。

# アーキテクチャ原則（System / Service / Logic の区分）
迷いをなくすため、**「ECSのWorld(データベース)を知っているかどうか」**で責務を分類する。

- **Component = 純粋データ**: メソッドを持たず、状態のみを保持する。
- **System (`_system.py`) = 実行のトリガー**: 
    - Worldに依存する。毎フレーム実行される。
    - 対象エンティティをフィルタリングし、Serviceを呼び出して状態を更新する「進行係」。
- **Service (`_service.py`) = 状態の操作**: 
    - Worldに依存する。ステートレス。
    - 「ターゲットの探索」「アクションの中断処理」など、Worldの状態を引数に取り、エンティティを跨いだ整合性を保つ「操作・手続き」。
- **Logic (`_logic.py` / `domain/`) = 計算ルール**: 
    - **Worldに依存しない。**
    - 基本型(int, str, dict)のみを受け取り、計算結果を返す。「ダメージ計算式」「属性相性判定」など、Worldがなくてもテスト可能な「純粋関数」。
- **Registry (`_registry.py`) = 振る舞いのカタログ**: 
    - スキルや特性などのStrategyパターンを管理する辞書。
- **Entity = ID**: 整数(int)で表現し、コンポーネントの入れ物としての役割に限定する。
- **World = データベース**: 全エンティティとコンポーネントを一元管理する。

# 基本となるファイル命名方針
- **`_component.py`**: 純粋なデータクラス。
- **`_system.py`**: `update(dt)`を持ち、Componentを持つEntityを操作。
- **`_service.py`**: WorldやEntityを操作する、ステートレスな機能群。
- **`_logic.py`**: Worldに依存しない、純粋な計算ロジック。
- **`_view_model.py`**: ECSデータを、描画用中間データ構造に変換。
- **`_renderer.py`**: ECSに関知しない、Pygameへの描画命令。
- **`_helper.py` / `_utils.py`**: ※可能な限り具体的責務を持つファイルに分割することを目指す。

# ゲームルール
- チーム: 3vs3の団体戦。
- 終了条件: リーダー（1機目）の機能停止。
- 機能停止: 「頭部」を破壊された機体はその場で戦闘から離脱。
- 制限: 破壊されたパーツは使用不可。

# 戦闘システム
- 「行動選択 → 充填 → 行動実行 → 放熱」というサイクルの変則ATB。
- アイコンが左右に移動することでゲージ状況を表現。
- 演出中やメッセージ表示中は時間が止まる「ウェイト式」。
- 各機体は「性格」に基づき、自動で各パーツごとにターゲットを選定。
- プレイヤー（コマンダー）が、どのパーツを使用するのかを最終決定する。

# 機体ステータス
- 「頭部・右腕・左腕・脚部」が個別のステータスを持つ。
- 装着メダルとパーツの属性が一致すると、ステータスにボーナス。
- 「攻撃側メダル属性x使用パーツ属性」と「防御側メダル属性」の相性により、ダメージや命中率にボーナス。